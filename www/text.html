<html>
<head>
  <script src="lib/jQuery/jquery-2.2.3.min.js"></script>
  <script type="text/javascript" src="js/textReader.js"></script>
  <!-- <script type="text/javascript" src="node_modules/ivona-node/example/example.js"></script> -->
  <!-- <script type="text/javascript" src="node_modules/ivona-node/src/main.js"></script>
  <script type="text/javascript" src="node_modules/ivona-node/src/proxy.js"></script> -->
</head>
<body>
<ion-view>
  <ion-header-bar class="bar-stable bar-royal">
    <h1 class="title">Great Expectations</h1>
    <figure class = "logo">
      <img id ="logo" src = "img/face.png" align="right">
    </figure>
  </ion-header-bar>
  <div class="bar bar-subheader">
    <div class="button-bar">
      <a type="button" id="playButtonInText" class="button icon ion-play" onclick="playAudio()"></a>
      <a type="button" id="playButtonInText" class="button icon ion-pause" onclick="pauseAudio()"></a>
    </div>
  </div>
  <br><br><br><br>
  <div class="list" style="height=30px">
    <ion-scroll zooming="true" direction="y" style="height: 500px">
      <div class="item item-body">
        <h4 class="header">Author: Charles Dickens</h4>
        <div id="audioSection">
        </div>
        <p id="mainTextBook" style="text-align: justify">

        </p>
      </div>
    </ion-scroll>
  </div>
  <div class="tabs tabs-icon-top tabs-royal">
    <a class="tab-item">
      <i class="icon ion-home" ui-sref="mainhome"></i>
      Home
    </a>
    <a class="tab-item">
      <i class="icon ion-ios-book-outline"></i>
      Started to Read...
    </a>
    <a class="tab-item">
      <i class="icon ion-gear-a" ui-sref="settings"></i>
      Settings
    </a>
<div class="tabs tabs-icon-top tabs-royal">
  <a class="tab-item">
    <i class="icon ion-home"></i>
    Home
  </a>
  <a class="tab-item">
    <i class="icon ion-ios-book-outline"></i>
    Started to Read...
  </a>
  <a class="tab-item">
    <i class="icon ion-gear-a"></i>
    Settings
  </a>
</div>
  </div>
</ion-view>
<script>
// var speechSource = document.getElementsByTagName("source");
// var speech = document.getElementById("speech1");
// function playAudio() {
//     if (bookmark != 40) {
//       var temp = "speech".concat(bookmark);
//       console.log(temp);
//       speech = document.getElementById(temp);
//       console.log(speech);
//       //speech = document.getElementById("speech");
//       //console.log(speech.innerHTML);
//       //speech.innerHTML = "<source id=\"speechSource\" src=\"js/sound/SampleBookmp3/GreatExpectations".concat(bookmarkStringer,".mp3"," type=\"audio/mpeg\">");
//       speech.play();
//       bookmark = bookmark + 1;
//     }
//   //console.log(bookmark);
//   //var soundURL = "js/sound/SampleBookmp3/GreatExpectations".concat(bookmarkStringer,".mp3");
//   //var temp = "<source id=\"speechSource\" src=\"js/sound/SampleBookmp3/GreatExpectations".concat(bookmarkStringer,".mp3"," type=\"audio/mpeg\">");
//   //console.log(temp);
//   //speech.innerHTML = temp;
// }
// speech.onended = playAudio();
//
// function pauseAudio() {
//     speech.pause();
// }

var speech;
var temp;
var workingSpan;
bookmark = bookmark+1;
function playAudio(){
  temp = "speech".concat(bookmark);
  //console.log(temp);
  speech = document.getElementById(temp);
  workingSpan = document.getElementById(bookmark.toString());
  workingSpan.style.backgroundColor = "#b5a0d6";
  //console.log(speech);
  //speech = document.getElementById("speech");
  //console.log(speech.innerHTML);
  //speech.innerHTML = "<source id=\"speechSource\" src=\"js/sound/SampleBookmp3/GreatExpectations".concat(bookmarkStringer,".mp3"," type=\"audio/mpeg\">");
  speech.play();
  speech.onended = function() {
    workingSpan.style.backgroundColor = "white";
    bookmark = bookmark+1;
    user.update({ bookmark: bookmark});
    playAudio();
  }
  //bookmark = bookmark + 1;
}
function pauseAudio(){
    speech.pause();
}
</script>
</body>
</html>
